
=================================================
##6) Storage and Volumes
=================================================






34:30
=============================

Lets check another exmple of bind-mounting  
specifically using a MySQL database as a real-world example.

Let’s take a simple MySQL container as an example. 

Lets clear proviours container.

Lets say a scanerio when one or mulitple applicants insert and retirive data from a mysql server
and you run this mysql using docker contienr.


Now with defautl container behavior as:

Once we stop or remove the container, all the data inside that container is gone. 
So, if your MySQL container crashes or you delete it for some reason, you lose all the database records.

This is a big problem if you want to store important data like customer records, 
transactions, or any type of persistent database information.


Lets try doing this, first create a mysql contiber with mounting.
We gonna some data insert to it and manually delete it to examing the seanerio.


DockerDesktop show container is running..
Lets insert some data manually to mysql
to do that i have to insert container and then mysql server.


so lets do this, i am gonna do exec.

Inportant point it as when i run the contienr i include some env variable with command.
to Pass user name amd database name on onthe fly.

How i know that this way have to push mysql info to server.
gues what.. we all get form docker hub documentation.



Now lets access mysql server now usign this user credentials.
and I am in !
 

Lets run some mysql command, lets check db first.
we should see simpledb what we pass ron runtime.

Lets check table, no table as we not create one till now.

Now crate a table called book.
Lets Insert some data in to it.


lset cehck by running select query.


Okey now our mysql server is ready, lets say some application 
insert some in book table as i do it manually.



Now lets semulate container crash and data loss.
Lets manullay delete the continer.

Now not contienr.

Lets run it again, i am going to user same commane.



Lets checn our contienr on same process is any previous data is have our contienr or not.


You see not data or table here !
Because when we user defautl bahavior or container thne data is goon with contienr when it remove.





Now we go mysql server with volumena and Bind-mounting both.
lets try bind mounting first.
You will find the comment in my document.


lets create volume first, we call it mysql-data.


Now i am going to run mysql contienr with thsi volume, then command as.
here i ma user -e insted of -env, -e is short form both are correct.


Here what i just done, here i mount the volume with mysql main directory 
what is use mysql server to keep confir and data.


our contienr run done.

lets go insett into contienr and same as create table and insert some data as before.


No table right table, first create table.
to keep it simple i just two field in book table.
and Insert some data.


lets run a select query to check data.


So right now we run our contianer with vaoluem mounting with a volume 
what is show here.

This is the command i use to run it.
and we insett some data in our mysql server, 
so now the data persist in the volume not on contianer its self.


Now ageing, lets delte the contienr and run it aginr to chek the data.

Lets use the same command, thsi time we should get our prevourly inseted data.


lets check, to do that lets exec it againg.
access mysql...
chek database., Its show the database.
check table, In this we should data, and your see!
we get our provieurs inserteed data as expected.
Now this way your data is save.




Same way will owrk Bind Mount: 

Why not we try this, lets run it!

to do that we have to provide a pat of host macheine pat and on right side or : will be contienr path.

Lets copy the command and run it..
Here user host location, contienr pate etc 
and lets run it.

Its running
Int tis time no volume we use we user host machine dorectory to keep data.
you see here is it the directorhy in my host machein.



Lets do same producre to insert data in to it.
exec the contienra
access mysql server.

Insertt some data.

Lets run all command at a time..


In this time mysql data wrint in the directory on in any volume.


Lets delete and remove the conteinr agirn and run it ageint.

lets run it useirng same command.

Its running, thsi time we user bidn ount with same host locaton.
so we should get our privioru inserted data here.

lets check it...


    

[Conclusion]
Thank you for watching! Don’t forget to like, subscribe, and click the bell for more tutorials!

